<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Measurement in LTE]]></title>
    <url>%2F2019%2F01%2F01%2FMeasurement-in-LTE%2F</url>
    <content type="text"><![CDATA[This page will explain about various aspect of Measurement Process that is happening in a LTE. In any technology, Measurement is done roughly at two stage. One is measurement in Idle mode and the other one is in Connected mode. Idle mode measurement is mainly for Cell Selection and Reselection process and most of idle mode measurement criteria is determined by SIB messages, the connected mode measurement is mostly for Handover or CSFB and the measurement criteria is determined by specific RRC messages dedicated for a specific UE. This page will deal with connected mode measurement process only. Idle mode measurement is not the scope of this page. In terms of RRC message, you may say Measurement Process would be a simple one, that is eNB sends an RRC message indicating what ind of items to be measured and UE sends an RRC message that carries the result of the measurement You’re right at the high level, but you will find it very tricky if you are asked to create the RRC message with all the detailed parameters (IE: Information Elements) to trigger UE to perform the specific measurement. There are so many details you need to understand. On UE protocol stack as well, implmentating the measurement process would be one of the most challenging item. According to my experience, it tend to take huge time and effort to implement all sorts of measurement algorithm and take a lot of time for verification process as well. Topics on this page are as follows [TOC] LTE Measurement Report Trigger (EVENT for Measurement Report)One of the most important step for Handover is Measurement Report from UE before the handover. Network make a decision on whether it will let UE handover or not,based on the measurement value from UE. There are many different measurement items and many different ways to measure the signal quality of the current cell (serving cell) and target cell. Ideally a network let UE to report the signal quality (usually RSRP) of the current cell (serving cell) and target cell and set the arbitrary rule for handover. But this can be too complicated and too much load on network since the network may need a multiple times of consecutive measurement result in stead of using only a single or a couple of measured signal quality value.(Can you think of why only one or a couple of signal quality measurement (RSRP) would not be a good enough for this kind of decision making?) As a kind of solution, 3GPP defines several set of predefined set of measurement report mechanism to be performed by UE. These predefined measurement report type is called “Event”. What kind of “Event” a UE has to report is specified by RRC Connection Reconfiguration message as follows (shown in red). Brief description you can find from 3GPP 36.331 5.5.4 Measurement report triggering is as follows. You well see pretty complicated description of the exact procedure of each of these events, but if you convert those descriptions into a graphical format it would be much easier/intuitive to understand the nature of these events. Event Type Description Event A1 Serving becomes better than threshold Event A2 Serving becomes worse than threshold Event A3 Neighbour becomes offset better than serving Event A4 Neighbour becomes better than threshold Event A5 Serving becomes worse than threshold1 and neighbour becomes better than threshold2 Event A6 Neighbour become offset better than S Cell (This event is introduced in R10 for CA) Event B1 Inter RAT neighbour becomes better than threshold Event B1-NR NR neighbour becomes better than threshold Event B2 Serving becomes worse than threshold1 and inter RAT nerghbour becomes better than threshold2 Event B2-NR Serving becomes worse than threshold1 and NR neighbour becomes better than threshold2 Event C1 CSI-RS resource becomes better than threshold Event C2 CSI-RS resource becomes offset better than reference CSI-RS resource Event W1 WLAN becomes better than a threshold Event W2 All WLAN inside WLAN mobility set becomes worse than threshold1 and a WLAN outside WLAN mobility set becomes better than threshold2 Event W3 All WLAN inside WLAN mobility set becomes worse than a threshold Event V1 The channel busy ratio is above a threshold Event V2 The channel busy ratio is below a threshold Event H1 The Aerial UE height is above a threshold Event H2 The channel busy radio is below a threshold Following is an illustration showing possible conditions triggering each of the events A1~A6. Just suppose that you become a UE and generating measurement report following along the timeline. If you don’t get confused, you are high quality UE..^_^ Simply put, Measurement Report is triggered by whether the measured value crosses (goes higher or goes lower) a certain target value. The target value can be set by one of two methods. One is to use threshold which is a kind of absolute value and the other one is to use Offset value which is a kind relative value with a reference to ‘something’ like serving cell value. However, in reality the measured value can fluctuate pretty frequently sometimes by measurement error by UE modem and sometimes by the fluctuation of Radio channel itself. In most case, the network would not be interested in such a small fluctuation and does not want to get too many measurement reports triggered by such a small fluctuation. To provent this kind of unnecessarily frequent measurement report caused by small range of fluctuation, the parameter called ‘Hysteresis’ is introduced. The role of Hysteresis can be illustrated as below and hope this would make sense to you. Measurement GAPBefore the handover, UE normally measure the cell power (signal quality) of the target cell and report it to the network, so that network can make a decision whether to allow UE to handover to the target cell or not. It is not a big issue to measure the signal quality of the target cell if the target cell is at same frequency as the current cell (Intrafrequency measurement). But there would be an issue when the target cell is at a different frequency from the current cell (Interfrequency measurement). Just in terms of logical sense of view, the simplest solution for Interfrequency measurement, the simplest solution for this would be to implement two RF tranciever on UE. However, there are some practical problems with this kind of two tranciever solution. One of the problems is cost issue. It would require additional cost to implement the additional tranciever. The other problem would be the possible interference between the current frequency and target frequency especially when the current frequency and target frequency are close to each other. So they come out with a special techique called “Measurement GAP”. This is the same concept as “Compressed Mode” in UMTS. The idea of the Measurement GAP is to create a small gap during which no transmission and reception happens. Since there is no signal transmission and reception during the gap, UE can switch to the target cell and perform the signal quality measurement and come back to the current cell. To make this work seamlessly, there should be a well established agreement between UE and Network about the gap definition (e.g, Starting Position of the Gap, Gap length, number of Gaps etc) and this agreement is established by MeasGapConfig IE of RRC Connection Reconfiguration message. If you see this part, RRC contents is small but you need to go through several steps as follows to fully understand the implementation of the measurement GAP. Measurement with CGI reportThere is a special type of Measurement Report. Normally Measurement Control/Report is for detecting the signal strength of the target cell, but CGI report is not for measuring the signal strength. It is to detect the Cell ID. It is not a simple cell ID, it is to measure CGI (Cell Global Identity) which uniquely identifies a cell in the whole world. For a ordinary measurement report, UE only have to switch its tuner to target cell and measure the signal strength and it does not have to decode any MIB, SIB of the target cell. It would take very short time to measure the signal strength. But it is different story in case of CGI. CGI is made up of PLMN + LAC + Cell ID. It means UE has to decode MIB/SIBs of the target cell. Decoding MIB/SIB is not a big issue if it is in idle mode, but the problem is that measurement control/report should happen in Connected Mode. Measurement GAP in LTE would not give enough time for UE to decode MIB/SIBs of the target cell. Then how can we give UE enough time to measure MIB/SIBs of target cell in connected mode. You can use DRX for this. Using DRX, you can give UE time long enough to measure MIB/SIBs of target cell. One think you have to be careful about DRX is that you have to make it sure that network should not send any data or UL Grant during the drx cycle. In case of measurement gap, measurement gap has high priority than data transmission/reception, but in DRX data transmission or handling UL grant has higher priority than DRX. It means if UE has any DL data or UL grant during on Time of DRX cycle it does not goes into OFF period for a certain duration. If network keep sending data or UL grant during the DRX cycle, UE can never gets into OFF period meaning it cannot have time to switch to target cell for CGI detection. In this case, UE would still send Measurement Report but cgi-info field would be missing in the report. Following is one example of RRC Connection Reconfiguration for CGI Report measurement control. See if my description above is properly reflecting the real message. For the details of this message, refer to following tables from 36.521-1 The page from ShareTechnot]]></content>
      <categories>
        <category>LTE</category>
      </categories>
      <tags>
        <tag>measurement</tag>
        <tag>event</tag>
        <tag>GAP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TB CW Layer的区别]]></title>
    <url>%2F2018%2F12%2F30%2FTB%2CCW%2CLayer%2F</url>
    <content type="text"><![CDATA[TB,CW,Layer TB Transport BlockCW Code word 一些设备供应商以Layer的形式来说明他们设备的MIMO、CA能力。例如，你可能会看到设备描述“Capable of supporting max 10 layers”等等 下面的例子抽象图示化MIMO/CA中表示TB、CW、Layer之间关系的整体数据流(每个步骤的详细过程非常复杂)，看下面的一些术语吧 我经常听到一些人谈论“stream”，但是它的意思比较模糊，不同技术背景的人，可能有不同的认知和用法。在LTE中，Streams经常和Layers意思相同，和别人交流时候还是要注意下。 下面所有的插图只表示发射端Tx，假设接收端也有同样数量的Rx天线 无论在基站中有多少天线，TB和CW最大总是2 Example : 2x2 MIMO Example : 4x4 MIMO Example : 2CC CA (PCC 4x4, SCC 4x4) 以上来自ShareTechnote，以后会尽量使用英文，汉以后难免有些词不达意]]></content>
      <categories>
        <category>LTE术语</category>
      </categories>
      <tags>
        <tag>TB</tag>
        <tag>CW</tag>
        <tag>Layer</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WCDMA网络扰码冲突分析]]></title>
    <url>%2F2018%2F12%2F30%2FWCDMA%E7%BD%91%E7%BB%9C%E6%89%B0%E7%A0%81%E5%86%B2%E7%AA%81%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[WCDMA网络中同扰码干扰问题原因为无线帧失步，导致下行传输误码抬升，从而引起通话质差、静音、掉话等异常现象 问题描述某用户反映在兴业银行频繁出现无法正常通话的情况，问题现场拨测，频繁静音、掉话 问题分析此次静音现象出现在导频信号良好的情况下，使用NSG采集空口参数如下图所示。当前主导频小区为SC173，WD-天心区解放西路17号-2小区，RSCP -77dBm，EcNo -7.9dB。异常参数为Uu SIR及TrCH BLER DL，其中下行传输误码急剧抬升至100% UE连续上报测量报告，e1b事件扰码为487，最后一条Measurement Report和Service Request之间相差5s，已经失步了 详细分析测量报告中小区同步信息countC-SFN-Frame-difference，无线帧同步off+tm统计如下表： PSC off tm 173 7 33791 243 198 480 487 166 29311 379 198 224 上表中SC173为静音小区扰码，243\287\397都是扰码173小区的邻区扰码。根据3GPP TS 25.215协议，它们同站的帧偏移off值应该相同。扰码243\397分别和扰码173的帧偏移差值均为191，但是扰码487和173的差值为159。 核查问题周边扰码487分布，发现WI-天心区MiuLine酒吧SBTS室分-1与WI-天心区M2酒吧SDR室分-1同扰码，直线距离仅174米 WCDMA网络中UE是根据扰码来区分确认小区的，由上述可以UE已不能正确识别扰码487是哪个小区 解决方案修改WI-天心区M2酒吧SDR室分-1扰码 经验总结 截取静音前后RRC层Measurement Report，排除e1e\e1f等事件，如此类事件过多，首先进行RF、功率调整来减少导频污染，或是新增信源主控 截取静音前后Measurement Report中e1a\e1b事件SC，进行相关小区告警及邻区核查 核查2中SC复用距离 off、tm统计分析或者结合无线环境条件，临时闭锁验证，确认扰码冲突小区 邻区优化、RF调整 （如过单独进行步骤5，近端问题得以解决，远端依然存在风险。仍然需要步骤6解决） SC复用距离过近则变更扰码 优化调整完成后验证测试]]></content>
      <categories>
        <category>WCDMA案例</category>
      </categories>
      <tags>
        <tag>静音</tag>
        <tag>扰码冲突</tag>
      </tags>
  </entry>
</search>
